A51 MACRO ASSEMBLER  MATRIX_LED                                                           05/25/2022 16:41:03 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\Matrix_LED.obj
ASSEMBLER INVOKED BY: E:\Programing Dev Softwares\KeilC\C51\BIN\A51.EXE Matrix_LED.a51 SET(SMALL) DEBUG PRINT(.\Listings
                      \Matrix_LED.lst) OBJECT(.\Objects\Matrix_LED.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     
0000                   2     ORG 0000h
0000 02006E            3             ljmp RST_INT
0030                   4     ORG 0030h
                       5             ;dung R0 luu gia tri hang, R1 luu gia tri cot, R2 luu so lan lap ham nhan nut
0030                   6             main_pro:
0030 12004C            7             lcall nhannut1
0033 8880              8             mov P0, R0
0035 12009B            9             lcall nhannut2
0038 89A0             10             mov P2, R1
003A 1200E7           11             lcall delay1s ;delay 2s cho led ma tran sang dung 2s roi tat
003D 1200E7           12             lcall delay1s
                      13     
0040 758000           14             mov 80h, #00h   
0043 75A000           15             mov 0A0h, #00h 
0046 759000           16             mov 90h, #00h   
0049 020030           17             ljmp main_pro
                      18             
004C                  19             nhannut1:
004C E5B0             20             mov A, 0B0h
004E 540F             21             anl A, #0Fh
0050 B40F03           22             cjne A, #0Fh, duocnhan1
0053 02004C           23             ljmp nhannut1
                      24             
0056                  25             duocnhan1:
0056 1200DE           26             lcall delay
0059 E5B0             27             mov A, 0B0h
005B 540F             28             anl A, #0FH
005D B40F1A           29             cjne A, #0Fh, kiemtra1
0060 8000             30             sjmp chongdoi1
                      31             
                      32             
0062                  33             chongdoi1:
0062 1200DE           34             lcall delay
0065 E5B0             35             mov A, 0B0h
0067 540F             36             anl A, #0Fh
0069 B40FEA           37             cjne A, #0Fh, duocnhan1
006C 80F4             38             sjmp chongdoi1
                      39             
006E                  40             RST_INT:
006E 758000           41             mov 80h, #00h   ;Khoi tao gia tri ban dau cho cot LED khi chua nhan nut
0071 75A000           42             mov 0A0h, #00h ;Khoi tao gia tri ban dau cho hang LED khi chua nhan nut
0074 759000           43             mov 90h, #00h   ;Khoi tao gia tri ban dau cho cot LED khi chua nhan nut
0077 020030           44             ljmp main_pro
                      45             
                      46             
007A                  47             kiemtra1:
007A B40E05           48             cjne A, #00001110b, two1
007D 5408             49             anl A, #00001000b
007F F8               50             mov R0,A
0080 E4               51             clr A
0081 22               52             ret
                      53             
0082                  54             two1:
0082 B40D05           55             cjne A, #00001101b, three1
0085 540C             56             anl A, #00001100b
0087 F8               57             mov R0, A
A51 MACRO ASSEMBLER  MATRIX_LED                                                           05/25/2022 16:41:03 PAGE     2

0088 E4               58             clr A
0089 22               59             ret
                      60             
008A                  61             three1:
008A B40B07           62             cjne A, #00001011b, four1
008D 5408             63             anl A, #00001000b
008F 2406             64             add A, #00000110b
0091 F8               65             mov R0, A
0092 E4               66             clr A
0093 22               67             ret
                      68             
0094                  69             four1:
                      70             ; 4: 0000 0111
0094 5400             71             anl A, #00000000b
0096 240F             72             add A, #00001111b
0098 F8               73             mov R0,A
0099 E4               74             clr A
009A 22               75             ret
                      76             
009B                  77             nhannut2:
009B E5B0             78             mov A, 0B0h
009D 54F0             79             anl A, #0F0h
009F B4F003           80             cjne A, #0F0h, duocnhan2
00A2 02009B           81             ljmp nhannut2
                      82             
00A5                  83             duocnhan2:
00A5 1200DE           84             lcall delay
00A8 E5B0             85             mov A, 0B0h
00AA 54F0             86             anl A, #0F0H
00AC B4F00E           87             cjne A, #0F0h, kiemtra2
00AF 8000             88             sjmp chongdoi2
                      89             
                      90             
00B1                  91             chongdoi2:
00B1 1200DE           92             lcall delay
00B4 E5B0             93             mov A, 0B0h
00B6 54F0             94             anl A, #0F0h
00B8 B4F0EA           95             cjne A, #0F0h, duocnhan2
00BB 80F4             96             sjmp chongdoi2
                      97             
                      98     
                      99             
00BD                 100             kiemtra2:
00BD B4E005          101             cjne A, #11100000b, two2
00C0 5480            102             anl A, #10000000b
00C2 F9              103             mov R1,A
00C3 E4              104             clr A
00C4 22              105             ret
                     106             
00C5                 107             two2:
00C5 B4D005          108             cjne A, #11010000b, three2
00C8 54C0            109             anl A, #11000000b
00CA F9              110             mov R1, A
00CB E4              111             clr A
00CC 22              112             ret
                     113             
00CD                 114             three2:
00CD B4B007          115             cjne A, #10110000b, four2
00D0 5480            116             anl A, #10000000b
00D2 2460            117             add A, #01100000b
00D4 F9              118             mov R1, A
00D5 E4              119             clr A
00D6 22              120             ret
                     121             
00D7                 122             four2:
                     123             ; 4: 0000 0111
A51 MACRO ASSEMBLER  MATRIX_LED                                                           05/25/2022 16:41:03 PAGE     3

00D7 5400            124             anl A, #00000000b
00D9 24F0            125             add A, #11110000b
00DB F9              126             mov R1,A
00DC E4              127             clr A
00DD 22              128             ret
                     129             
                     130     
                     131             ;delay ngan
00DE                 132             delay:
00DE 7A14            133             mov R2, #20
00E0                 134             loop1:
00E0 7BFA            135             mov R3, #250
00E2                 136             loop2:
00E2 DBFE            137             djnz R3, loop2
00E4 DAFA            138             djnz R2, loop1
00E6 22              139             ret
                     140             
                     141             
                     142             ;delay
00E7                 143             delay1s:
                     144             ; su dung timer 1 che do 1
00E7 7E05            145             mov R6, #005h
00E9                 146             loop5:
00E9 7DC8            147             mov R5, #0C8h
00EB                 148             loop4:
00EB 758901          149             mov TMOD, #01h
00EE 758CFC          150             mov TH0, #0FCh
00F1 758A18          151             mov TL0, #018h
00F4 D28C            152             setb TR0
00F6                 153             loop_1ms:
00F6 308DFD          154             jnb TF0, loop_1ms
00F9 C28D            155             clr TF0
00FB C28C            156             clr TR0
00FD DDEC            157             djnz R5, loop4
00FF DEE8            158             djnz R6, loop5
0101 22              159             ret
                     160     
                     161     END
A51 MACRO ASSEMBLER  MATRIX_LED                                                           05/25/2022 16:41:03 PAGE     4

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

CHONGDOI1. . . . .  C ADDR   0062H   A   
CHONGDOI2. . . . .  C ADDR   00B1H   A   
DELAY. . . . . . .  C ADDR   00DEH   A   
DELAY1S. . . . . .  C ADDR   00E7H   A   
DUOCNHAN1. . . . .  C ADDR   0056H   A   
DUOCNHAN2. . . . .  C ADDR   00A5H   A   
FOUR1. . . . . . .  C ADDR   0094H   A   
FOUR2. . . . . . .  C ADDR   00D7H   A   
KIEMTRA1 . . . . .  C ADDR   007AH   A   
KIEMTRA2 . . . . .  C ADDR   00BDH   A   
LOOP1. . . . . . .  C ADDR   00E0H   A   
LOOP2. . . . . . .  C ADDR   00E2H   A   
LOOP4. . . . . . .  C ADDR   00EBH   A   
LOOP5. . . . . . .  C ADDR   00E9H   A   
LOOP_1MS . . . . .  C ADDR   00F6H   A   
MAIN_PRO . . . . .  C ADDR   0030H   A   
NHANNUT1 . . . . .  C ADDR   004CH   A   
NHANNUT2 . . . . .  C ADDR   009BH   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
RST_INT. . . . . .  C ADDR   006EH   A   
TF0. . . . . . . .  B ADDR   0088H.5 A   
TH0. . . . . . . .  D ADDR   008CH   A   
THREE1 . . . . . .  C ADDR   008AH   A   
THREE2 . . . . . .  C ADDR   00CDH   A   
TL0. . . . . . . .  D ADDR   008AH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   
TWO1 . . . . . . .  C ADDR   0082H   A   
TWO2 . . . . . . .  C ADDR   00C5H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
