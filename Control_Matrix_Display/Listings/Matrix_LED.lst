A51 MACRO ASSEMBLER  MATRIX_LED                                                           05/23/2022 23:01:49 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\Matrix_LED.obj
ASSEMBLER INVOKED BY: E:\Programing Dev Softwares\KeilC\C51\BIN\A51.EXE Matrix_LED.a51 SET(SMALL) DEBUG PRINT(.\Listings
                      \Matrix_LED.lst) OBJECT(.\Objects\Matrix_LED.obj) EP

LOC  OBJ            LINE     SOURCE

0000                   1     ORG 0000h
0000 02004F            2             ljmp RST_INT
0030                   3     ORG 0030h
                       4             ;dung R0 luu gia tri hang, R1 luu gia tri cot, R2 luu so lan lap ham nhan nut
0030                   5             main_pro:
0030 758000            6             mov 80h, #00h   ;Khoi tao gia tri ban dau cho cot LED khi chua nhan nut
0033 75A000            7             mov 0A0h, #00h ;Khoi tao gia tri ban dau cho hang LED khi chua nhan nut
0036 759000            8             mov 90h, #00h   ;Khoi tao gia tri ban dau cho cot LED khi chua nhan nut
0039 E5B0              9             mov A, 0B0h
003B 540F             10             anl A, #0Fh
003D B40F03           11             cjne A, #0Fh, duocnhan
                      12             
0040 020030           13             ljmp main_pro
                      14             
0043                  15             duocnhan:
0043 120089           16             lcall delay
0046 E5B0             17             mov A, 0B0h
0048 540F             18             anl A, #0FH
004A B40F05           19             cjne A, #0Fh, kiemtra
004D 802E             20             sjmp chongdoi
                      21             
                      22             ; code chua hoan thien chuc nag reset chua dung duoc 
004F                  23             RST_INT:
                      24     
004F 020030           25             ljmp main_pro
                      26             
                      27             
0052                  28             kiemtra:
                      29             ; TH khi A = 0000|0111b
0052 B40E05           30             cjne A, #00001110b, two
0055 5408             31             anl A, #00001000b
0057 020073           32             ljmp display
                      33             
005A                  34             two:
005A B40D05           35             cjne A, #00001101b, three
005D 540C             36             anl A, #00001100b
005F 020073           37             ljmp display
                      38             
                      39             
0062                  40             three:
0062 B40B07           41             cjne A, #00001011b, four
0065 5408             42             anl A, #00001000b
0067 2406             43             add A, #00000110b
0069 020073           44             ljmp display
                      45             
006C                  46             four:
                      47             ; 4: 0000 0111
006C 5400             48             anl A, #00000000b
006E 240F             49             add A, #00001111b
0070 020073           50             ljmp display    
                      51             
0073                  52             display:
0073 F5A0             53             mov P2, A
0075 F580             54             mov P0, A
0077 120089           55             lcall delay
007A 020073           56             ljmp display
                      57             
A51 MACRO ASSEMBLER  MATRIX_LED                                                           05/23/2022 23:01:49 PAGE     2

007D                  58             chongdoi:
007D 120089           59             lcall delay
0080 E5B0             60             mov A, 0B0h
0082 540F             61             anl A, #0Fh
0084 B40FBC           62             cjne A, #0Fh, duocnhan
0087 80F4             63             sjmp chongdoi
                      64             
0089                  65             delay:
                      66             ; su dung timer 1 che do 1
0089                  67             loop1:
0089 758910           68             mov TMOD, #10h
008C 758DD8           69             mov TH1, #0D8h
008F 758BF0           70             mov TL1, #0F0h
0092 D28E             71             setb TR1
0094                  72             loop2:
0094 308FFD           73             jnb TF1, loop2
0097 C28F             74             clr TF1
0099 C28E             75             clr TR1
009B 22               76             ret
                      77     END
A51 MACRO ASSEMBLER  MATRIX_LED                                                           05/23/2022 23:01:49 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

CHONGDOI . . . . .  C ADDR   007DH   A   
DELAY. . . . . . .  C ADDR   0089H   A   
DISPLAY. . . . . .  C ADDR   0073H   A   
DUOCNHAN . . . . .  C ADDR   0043H   A   
FOUR . . . . . . .  C ADDR   006CH   A   
KIEMTRA. . . . . .  C ADDR   0052H   A   
LOOP1. . . . . . .  C ADDR   0089H   A   
LOOP2. . . . . . .  C ADDR   0094H   A   
MAIN_PRO . . . . .  C ADDR   0030H   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
RST_INT. . . . . .  C ADDR   004FH   A   
TF1. . . . . . . .  B ADDR   0088H.7 A   
TH1. . . . . . . .  D ADDR   008DH   A   
THREE. . . . . . .  C ADDR   0062H   A   
TL1. . . . . . . .  D ADDR   008BH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR1. . . . . . . .  B ADDR   0088H.6 A   
TWO. . . . . . . .  C ADDR   005AH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
